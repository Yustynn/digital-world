#:kivy 1.9.1

#:import hex kivy.utils.get_color_from_hex
#:import state State.state
#:import BLUE colors.BLUE
#:import GREEN colors.GREEN
#:import ORANGE colors.ORANGE

<DataDisplayRow@BoxLayout>:
    Label:
        halign: 'left'
        color: root.color
        text: root.label
    Label:
        halign: 'left'
        text: str(root.data)

<DataDisplay@GridLayout>:
    rows: 3

    DataDisplayRow:
        color: GREEN
        data: state.target_temp
        label: 'TARGET TEMPERATURE'

    DataDisplayRow:
        color: ORANGE
        data: state.temp
        label: 'CURRENT TEMPERATURE'

    DataDisplayRow:
        color: BLUE
        data: state.power
        label: 'POWER'


<PowerGraph, TemperatureGraph>:
    xlabel: 'time'

<PowerGraph>
    ylabel: 'power'
    ymin: -3
    ymax: 103

<TemperatureGraph>
    ylabel: 'temperature'
    ymin: 22
    ymax: 37

<Label>:
    font_name: './assets/RobotoMono-Regular'
    halign: 'center'
    valign: 'middle'
    text_size: self.size

<Sidebar@BoxLayout>:
    state: state

    orientation: 'vertical'
    size_hint_x: 0.3

    canvas.before:
        Color:
            rgb: hex('#3D3D3D')
        Rectangle:
            pos: self.pos
            size: self.size
    Label:
        text: 'Change Target Temperature'

        size_hint_y: 0.3

    Slider:
        id: slider
        orientation: 'vertical'
        range: 25, 35
        step: 0.1
        value: 30.0

    Label:
        size_hint_y: 0.2
        text: str(slider.value)
    Label:
        size_hint_y: 0.15
        text: 'currently {}'.format(state.target_temp)
    Button:
        background_color: hex('83BCFE')
        background_normal: ''
        on_press: state.set('target_temp', slider.value)
        text: 'SET'

        size_hint_y: 0.3

<Content@BoxLayout>:
    orientation: 'vertical'
    canvas.before:
        Color:
            rgb: hex('#282828')
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        Image:
            source: './assets/logo.png'
            size_hint_x: None
            width: sp(200)
        DataDisplay

    TemperatureGraph
    PowerGraph

<RootWidget>:
    GridLayout:
        cols: 2
        size: root.size

        Content

        Sidebar
